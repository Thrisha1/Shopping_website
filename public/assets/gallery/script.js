
(function(b){function x(a){b(a.target).closest(".mbr-slider").hasClass("in")&&a.target.playVideo()}function y(a){if(a){var c=a!=document&&a.matches(".mbr-gallery");a=c&&a.id&&a.id.toLowerCase().includes("gallery");return c&&a?!0:!1}}function l(a){var c=b(a.target);c[0]._masonryProgress||(c[0]._masonryProgress=!0,"undefined"!==typeof b.fn.masonry&&c.find(".mbr-gallery").each(function(){var a=b(this).find(".mbr-gallery-row");a.one("layoutComplete",function(){c[0]._masonryProgress=!1});a.imagesLoaded().progress(function(){a.masonry({itemSelector:".mbr-gallery-item:not(.mbr-gallery-item__hided)",
percentPosition:!0,horizontalOrder:!0,transitionDuration:0});a.masonry("reloadItems")});a.off("filter");a.on("filter",function(){a.masonry("reloadItems");a.masonry("layout");b(window).trigger("update.parallax")})}))}function p(a,c,b,d,f){var h=a.find("img");if(h[0].complete&&50<h[0].naturalWidth&&50<h[0].naturalHeight)q(h,a,c,b,d,f);else h.one("load",function(){q(h,a,c,b,d,f)})}function q(a,c,b,d,f,h){var m=a[0].naturalWidth,g=a[0].naturalHeight;d=d/b>m/g?(b-2*h)*m/g:d-2*h;d=d>=m?m:d;b=(b-d*g/m)/
2;a.css({width:parseInt(d),height:d*g/m});c.css("top",b+f)}function z(a,c,e,d,f,h){a.find(".modal-dialog .carousel-item").each(function(){if(!h&&!b(this)[0].classList.contains("carousel-item-next")&&!b(this)[0].classList.contains("carousel-item-prev")||h&&!b(this)[0].classList.contains("active"))b(this)[0].classList.contains("video-container")?b(this).css({top:d,height:e-2*d-2*f}):p(b(this),e,c,d,f)})}function r(){var a=b(window).width()-0,c=b(window).height()-0;if(k){var e,d=!1;k.find(".modal-dialog .carousel-item.carousel-item-next, .modal-dialog .carousel-item.carousel-item-prev").length?
e=k.find(".modal-dialog .carousel-item.carousel-item-next, .modal-dialog .carousel-item.carousel-item-prev"):(e=k.find(".modal-dialog .carousel-item.active"),d=!0);e[0].classList.contains("video-container")?e.css({top:0,height:c-0-20}):p(e,c,a,0,10);clearTimeout(t);t=setTimeout(z,200,k,a,c,0,10,d)}}var g=b("html").hasClass("is-builder");if(!g){var u=document.createElement("script");u.src="https://www.youtube.com/iframe_api";var v=document.getElementsByTagName("script")[0];v.parentNode.insertBefore(u,
v);var n=[];b(".carousel-item.video-container img").css("display","none");window.onYouTubeIframeAPIReady=function(){var a=a||{};a.YTAPIReady||(a.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"));b(".video-slide").each(function(a){b(".video-container").eq(a).append('<div id ="mbr-video-'+a+'" class="mbr-background-video" data-video-num="'+a+'"></div>').append('<div class="item-overlay"></div>');b(this).attr("data-video-num",a);if(-1!==b(this).attr("data-video-url").indexOf("vimeo.com")){var e=
{id:b(this).attr("data-video-url"),width:"100%",height:"100%",loop:!0};a=new Vimeo.Player("mbr-video-"+a,e);a.playVideo=Vimeo.play}else{var e=YT.Player,d;d=b(this).attr("data-video-url");d="false"===d?!1:(d=/(?:\?v=|\/embed\/|\.be\/)([-a-z0-9_]+)/i.exec(d)||/^([-a-z0-9_]+)$/i.exec(d))?d[1]:!1;a=new e("mbr-video-"+a,{height:"100%",width:"100%",videoId:d,events:{onReady:x},playerVars:{rel:0}})}n.push(a)})}}b(document).on("add.cards",function(a){var c=b(a.target);if(y(a.target))c.on("click",".mbr-gallery-filter li",
function(a){a.preventDefault();var d=b(this).closest("li");d.parent().find("li").removeClass("active");d.addClass("active");a=d.closest("section").find(".mbr-gallery-row");var f=b(this)[0].textContent.trim();c.find(".mbr-gallery-item").each(function(a,c){var e=b(this),g=e.attr("data-tags").split(",").map(function(a){return a.trim()});-1!==b.inArray(f,g)||d.hasClass("mbr-gallery-filter-all")?e.removeClass("mbr-gallery-item__hided"):e.addClass("mbr-gallery-item__hided")});a.closest(".mbr-gallery-row").trigger("filter")})});
if(g)b(document).on("changeButtonColor.cards",function(a){var c=b(a.target);if(0<c.find(".mbr-gallery-filter").length&&b(a.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var e=(c.find(".mbr-gallery-filter .mbr-gallery-filter-all").find("a").attr("class")||"").replace(/(^|\s)active(\s|$)/," ").trim();c.find(".mbr-gallery-filter ul li:not(.mbr-gallery-filter-all) a").attr("class",e)}l(a)});b(document).on("add.cards changeParameter.cards",function(a){var c=b(a.target),e=[];c.find(".mbr-gallery-item").each(function(a){(b(this).attr("data-tags")||
"").trim().split(",").map(function(a){a=a.trim();-1===b.inArray(a,e)&&e.push(a)})});if(0<c.find(".mbr-gallery-filter").length&&b(a.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var d="";c.find(".mbr-gallery-filter ul li:not(.mbr-gallery-filter-all)").remove();var f=c.find(".mbr-gallery-filter .mbr-gallery-filter-all").clone();f.find("a").removeClass("active");e.map(function(a){f.find("a").length?f.find("a").text(a):f.text(a);d+="<li>"+f.html()+"</li>"});f.remove();c.find(".mbr-gallery-filter ul").append(d)}l(a)});
b(document).on("change.cards",function(a){l(a)});b(document).on("lazyload",function(a){l(a);b(window).scrollEnd(function(){l(a)},250)});g||document.addEventListener("DOMContentLoaded",function(a){l(a)});b(".mbr-gallery-item").on("click","a",function(a){a.stopPropagation()});var w,t,k,g=b(document).find(".mbr-gallery");g.on("show.bs.modal",function(a){clearTimeout(w);w=setTimeout(function(){var c=b(a.relatedTarget).parent().attr("data-video-num"),c=b(a.target).find(".carousel-item .mbr-background-video[data-video-num="+
c+"]");b(a.target).find(".carousel-item .mbr-background-video");0<c.length&&c.closest(".carousel-item").hasClass("active")&&(c=n[+c.attr("data-video-num")],c.playVideo?c.playVideo():c.play())},500);k=b(a.target);r()});g.on("slide.bs.carousel",function(a){a=b(a.target).find(".carousel-item.active .mbr-background-video");0<a.length&&(a=n[+a.attr("data-video-num")],a.pauseVideo?a.pauseVideo():a.pause())});b(window).on("resize load",r);g.on("slid.bs.carousel",function(a){a=b(a.target).find(".carousel-item.active .mbr-background-video");
0<a.length&&(a=n[+a.attr("data-video-num")],a.playVideo?a.playVideo():a.play())});g.on("hide.bs.modal",function(a){n.map(function(a,b){a.pauseVideo?a.pauseVideo():a.pause()});k=null})})(jQuery);
